const $noteTitle=$(".note-title"),$noteText=$(".note-textarea"),$saveNoteBtn=$(".save-note"),$newNoteBtn=$(".new-note"),$noteList=$(".list-container .list-group");let activeNote={};const getNotes=()=>$.ajax({url:"/api/notes",method:"GET"}),saveNote=a=>$.ajax({url:"/api/notes",data:a,method:"POST"}),deleteNote=a=>$.ajax({url:"api/notes/"+a,method:"DELETE"}),renderActiveNote=()=>{$saveNoteBtn.hide(),activeNote.id?($noteTitle.attr("readonly",!0),$noteText.attr("readonly",!0),$noteTitle.val(activeNote.title),$noteText.val(activeNote.text)):($noteTitle.attr("readonly",!1),$noteText.attr("readonly",!1),$noteTitle.val(""),$noteText.val(""))},handleNoteSave=function(){const a={title:$noteTitle.val(),text:$noteText.val()};saveNote(a).then(()=>{getAndRenderNotes(),renderActiveNote()})},handleNoteDelete=function(a){a.stopPropagation();const b=$(this).parent(".list-group-item").data();activeNote.id===b.id&&(activeNote={}),deleteNote(b.id).then(()=>{getAndRenderNotes(),renderActiveNote()})},handleNoteView=function(){activeNote=$(this).data(),renderActiveNote()},handleNewNoteView=function(){activeNote={},renderActiveNote()},handleRenderSaveBtn=function(){$noteTitle.val().trim()&&$noteText.val().trim()?$saveNoteBtn.show():$saveNoteBtn.hide()},renderNoteList=a=>{$noteList.empty();const b=[],c=(a,b=!0)=>{const c=$("<li class='list-group-item'>"),d=$("<span>").text(a);if(c.append(d),b){const a=$("<i class='fas fa-trash-alt float-right text-danger delete-note'>");c.append(a)}return c};0===a.length&&b.push(c("No saved Notes",!1)),a.forEach(a=>{const d=c(a.title).data(a);b.push(d)}),$noteList.append(b)},getAndRenderNotes=()=>getNotes().then(renderNoteList);$saveNoteBtn.on("click",handleNoteSave),$noteList.on("click",".list-group-item",handleNoteView),$newNoteBtn.on("click",handleNewNoteView),$noteList.on("click",".delete-note",handleNoteDelete),$noteTitle.on("keyup",handleRenderSaveBtn),$noteText.on("keyup",handleRenderSaveBtn),getAndRenderNotes();